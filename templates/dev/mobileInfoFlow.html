<script>
(function() {
// MARK: - Parameters needed for each creative
var headline = '酩悦轩尼诗天猫旗舰店盛大开幕';
var lead = '酩悦轩尼诗进驻天猫，150万成交天价洋酒';
var image = 'https://creatives.ftimg.net/ads/shanghai/201707/information_flow_0728.jpg?';
var bgColor = '4';
var Click = 'https://moethennessy.m.tmall.com/';
var Imp = '';
var AdName = 'Paid Post';
var AssID = '';
var adId = 'fullbody1';//wyc Add. In the real template,the variable is from the “ad.html”'s url:“/phone/ad.html?isad=0&amp;v=1209#adtype=banner-paid-post-home&amp;adid=fullbody1”

if (Imp !== '') {
    var gaServerTracker = new Image();
    gaServerTracker.src = 'http://www.ftchinese.com/index.php/ft/hit/' + AssID + '/2?ec=' + AdName + ' (' + AssID + ')' + '&ea=initiate&el=' + Imp + '&' + Math.random();
    if (typeof window.parent.sendImpToThirdParty === 'function') {
        window.parent.sendImpToThirdParty(Imp, AdName, AssID);
    } else {
        sendImpToThirdParty(Imp, AdName, AssID);
    }
}

{{defineSendImpfunc}}

// MARK: - Code that generate the paid post in a parent window
var adFrameContainerDiv = parent.document.getElementById('ad-' + adId);//wycNote:'ad-fullbody1';adId='fullbody1';adFrameContainerDiv:<div class='adiframe banner ...' id='ad-fullbody1'></div>
var newItem = document.createElement("div");
var newItemId = 'paidpost-' + adId;//'paidpost-fullbody1'
var template = '<a id="paid-post-mpu-new" href="[Click]" target="_blank"><div class="oneStory" style="background:[background];margin:0;padding:0;border-bottom:1px solid #e9decf;"><div class="storyInner" style="padding:14px;"><div class="headline">[headline]</div>[image]<div class="lead" style="font-size:0.9em;">[lead]</div><div class="clearfloat"></div><div style="text-align: right;"><span style="color:#333;font-size:0.9em;background:#bdbdbd;padding:3px;">广告</span></div></div></div></a>';
var imageTemplate = '<div class="leftimage" style="width: 167px;height: 96px;"><img style="width:167px;height:96px;" src="https://www.ft.com/__origami/service/image/v2/images/raw/[image]?source=ftchinese&amp;width=334&amp;height=188"></div>';
var imageHTML = '';
var finalHTML = '';
var backgroundColorByUser = '';

if (image !== '') {
    image = encodeURIComponent(image);
    imageHTML = imageTemplate.replace('[image]', image);
}

switch (bgColor) {
case '0':
    backgroundColorByUser = 'transparent';
    break;
case '1':
    backgroundColorByUser = '#fbe9da';
    break;
case '2':
    backgroundColorByUser = '#f3dec8';
    break;
case '3':
    backgroundColorByUser = 'white';
    break;
case '4':
    backgroundColorByUser = '#f6e9d8';
    break;
default:
    backgroundColorByUser = 'transparent';
}

finalHTML = template.replace('[Click]', Click)
    .replace('[headline]', headline)
    .replace('[lead]', lead)
    .replace('[image]', imageHTML)
    .replace('[background]', backgroundColorByUser);

// MARK: Create the container of paid post if it doesn't exist
if (!parent.document.getElementById(newItemId)) {
    // console.log ('create the id');
    newItem.id = newItemId;
    adFrameContainerDiv.parentNode.insertBefore(newItem, adFrameContainerDiv);
} else {
    //console.log ('the id already exists');
    newItem = parent.document.getElementById(newItemId);
}

newItem.innerHTML = finalHTML;

// MARK: - Set the top border of the next story to 0 so that there's no double-line
adFrameContainerDiv.nextElementSibling.nextElementSibling.style.borderTopWidth = 0;
})();
</script>