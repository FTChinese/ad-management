<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The pushdown pic template</title><style>body,html{margin:0;padding:0;width:969px}.ad-container{width:969px;position:relative;cursor:pointer;overflow-y:hidden}.mode-banner{height:90px;display:block}.mode-banner .banner-img{width:100%;height:100%}.mode-banner .banner-img a{width:100%;height:100%}.mode-banner .banner-img img{width:100%;height:100%;display:block}.mode-banner .unfold-sign{position:absolute;z-index:20;top:2px;right:2px;width:53px;height:20px}.mode-big{height:90px;display:none}.mode-big .big-pic{position:absolute;top:0;left:0;width:100%;height:100%;overflow-y:hidden}.mode-big .big-pic img{width:969px;height:400px}.mode-big a{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;display:block}.mode-big .close-btn{position:absolute;z-index:20;width:53px;height:20px;top:2px;right:2px}.show{display:block}.hide{display:none}.pullup-close{-webkit-animation:shrinkToClose 1s linear;-moz-animation:shrinkToClose 1s linear;-o-animation:shrinkToClose 1s linear;animation:shrinkToClose 1s linear}.pushdown-open{-webkit-animation:pushdownToOpen 1s linear;-moz-animation:pushdownToOpen 1s linear;-o-animation:pushdownToOpen 1s linear;animation:pushdownToOpen 1s linear}@-webkit-keyframes shrinkToClose{from{width:969px;height:400px}to{width:969px;height:90px}}@-moz-keyframes shrinkToClose{from{width:969px;height:400px}to{width:969px;height:90px}}@-o-keyframes shrinkToClose{from{width:969px;height:400px}to{width:969px;height:90px}}@keyframes shrinkToClose{from{width:969px;height:400px}to{width:969px;height:90px}}@-webkit-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:400px}}@-moz-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:400px}}@-o-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:400px}}@keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:400px}}</style></head><body><div id="bannerImgSection" class="ad-container mode-banner"><div class="banner-img"><a id="bannerA" href="http://www.bmw.com.cn/zh/all-models/7-series/sedan/2017/campaign.html?bmw=dis:MSP:G12:p_ft_17-q3-g12-pd-g12-msp_hp_pd_pd&mz_ca=2055283&mz_sp=782Lt&mz_sb=1" target="_blank"><img id="bannerImg" src="https://du3rcmbgk4e8q.cloudfront.net/ads/beijing/201709/bmw-push-90.jpg" alt="banner img"></a></div><div id="openBtn" class="unfold-sign"><img src="http://i.ftimg.net/picture/5/000071405_piclink.jpg" alt="unfold sign"></div></div><div id="bigPicSection" class="ad-container mode-big"><div class="big-pic"><img id="bigPic" src="https://du3rcmbgk4e8q.cloudfront.net/ads/beijing/201709/Mobile-information_960x540_50k.jpg" alt="big img"></div><a id="bigPicA" href="http://www.bmw.com.cn/zh/all-models/7-series/sedan/2017/campaign.html?bmw=dis:MSP:G12:p_ft_17-q3-g12-pd-g12-msp_hp_pd_pd&mz_ca=2055283&mz_sp=782Lt&mz_sb=1" target="_blank"></a><div id="closeBtn" class="close-btn"><img src="http://i.ftimg.net/picture/4/000071404_piclink.jpg" alt="close"></div></div><script>!function(){"use strict";function e(e,t){const o=document.createElement("style");o.type="text/css",o.innerHTML=`${e}{${t}}`,document.getElementsByTagName("head")[0].appendChild(o)}class t{constructor(e,t){e instanceof HTMLElement?this.root=e:(this.root=document.getElementById(e),console.log(this.root)),"prod"!==t&&(t="dev"),this.root.querySelector("#openBtn")instanceof HTMLElement&&(this.open=this.root.querySelector("#openBtn")),this.root.querySelector("#bannerImg")instanceof HTMLElement&&(this.img=this.root.querySelector("#bannerImg")),this.root.querySelector("#bannerA")instanceof HTMLElement&&(this.a=this.root.querySelector("#bannerA")),this.dynamicSetData()}dynamicSetData(){window.parent&&window.parent.detailPage&&window.parent.bannerImg&&this.img&&this.a&&(this.a.href=window.parent.detailPage,this.img.src=window.parent.bannerImg)}}class o{constructor(e,t){e instanceof HTMLElement?this.root=e:(this.root=document.getElementById(e),console.log(this.root)),"prod"!==t&&(t="dev"),this.root.querySelector("#bigPic")instanceof HTMLElement&&(this.bigPic=this.root.querySelector("#bigPic")),this.root.querySelector("#closeBtn")instanceof HTMLElement&&(this.close=this.root.querySelector("#closeBtn")),this.root.querySelector("#bigPicA")instanceof HTMLElement&&(this.bigPicA=this.root.querySelector("#bigPicA")),this.dynamicSetData()}dynamicSetData(){const e=window.parent;e&&e.detailPage&&e.bigPic&&(this.bigPicA.href=e.detailPage,this.bigPic.src=e.bigPic)}}const i={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,o,i,n,s){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(o)switch(o.constructor){case Number:r=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:r="; expires="+o;break;case Date:r="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+(n?"; domain="+n:"")+(i?"; path="+i:"")+(s?"; secure":""),!0},removeItem:function(e,t,o){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}};class n{constructor(e,t,o){this.bannerObj=e,this.bigObj=t;let i="",n="";if(window.parent&&window.parent.parent){"prod"!=o?(o="dev",i="banner0Inner",n="banner0"):(i=window.parent.innerFrameId,n=window.parent.parentId);var s=window.parent.document.getElementById(i),r=window.parent.parent.document.getElementById(n);s&&r&&(this.innerIframeId=i,this.outerIframeId=n,this.innerIframe=s,this.outerIframe=r,this.innerIframe.style.height="90px",this.outerIframe.style.height="90px",this.injectCssToParents(),this.dealwithAncestors())}this.bigHeight="400px",this.dynamicSetBigHeight(),this.pushDownToOpen=this.pushDownToOpen.bind(this),this.pullUpToClose=this.pullUpToClose.bind(this),this.dynamicChangeCssClass(this.bigHeight),this.autoOpen(),this.clickToOpen(),this.clickToClose()}injectCssToParents(){if(!window.parent||!window.parent.parent)return;const e=window.parent.document.getElementsByTagName("head")[0];console.log(e);const t=window.parent.parent.document.getElementsByTagName("head")[0];console.log(t);const o=document.createElement("style");o.innerHTML=".pullup-close{-webkit-animation:shrinkToClose 1s linear;-moz-animation:shrinkToClose 1s linear;-o-animation:shrinkToClose 1s linear;animation:shrinkToClose 1s linear}.pushdown-open{-webkit-animation:pushdownToOpen 1s linear;-moz-animation:pushdownToOpen 1s linear;-o-animation:pushdownToOpen 1s linear;animation:pushdownToOpen 1s linear}@-webkit-keyframes shrinkToClose{from{width:969px;height:auto}to{width:969px;height:90px}}@-moz-keyframes shrinkToClose{from{width:969px;height:auto}to{width:969px;height:90px}}@-o-keyframes shrinkToClose{from{width:969px;height:auto}to{width:969px;height:90px}}@keyframes shrinkToClose{from{width:969px;height:auto}to{width:969px;height:90px}}@-webkit-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:auto}}@-moz-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:auto}}@-o-keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:auto}}@keyframes pushdownToOpen{from{width:969px;height:90px}to{width:969px;height:auto}}";const i=o.cloneNode(!0);e.appendChild(o),t.appendChild(i),console.log(e),console.log(t)}dynamicChangeCssClass(t){e(`@-webkit-keyframes shrinkToClose`,`from {width:969px;height:${t};}to {width:969px;height:90px;}`),e(`@-moz-keyframes shrinkToClose`,`from {width:969px;height:${t};}to {width:969px;height:90px;}`),e(`@-o-keyframes shrinkToClose`,`from {width:969px;height:${t};}to {width:969px;height:90px;}`),e(`@keyframes shrinkToClose`,`from {width:969px;height:${t};}to {width:969px;height:90px;}`),e(`@-webkit-keyframes pushdownToOpen`,`from {width:969px; height:90px;} to {width:969px;height:${t};}`),e(`@-moz-keyframes pushdownToOpen`,`from {width:969px; height:90px;} to {width:969px;height:${t};}`),e(`@-o-keyframes pushdownToOpen`,`from {width:969px; height:90px;} to {width:969px;height:${t};}`),e(`@keyframes pushdownToOpen`,`from {width:969px; height:90px;} to {width:969px;height:${t};}`)}dynamicSetBigHeight(){const e=window.parent;e&&e.bigHeight&&(this.bigHeight=e.bigHeight+"px")}dealwithAncestors(){if(!(this.outerIframeId&&this.outerIframe&&this.outerIframe.parentNode))return;const e=this.outerIframeId+"content",t=this.outerIframe.parentNode;t.id=e,window.parent.parent.document.styleSheets[0]&&window.parent.parent.document.styleSheets[0].insertRule("#"+e+":before { right: auto; left:0;}",0);let o=t;const i=window.parent.parent.document.body;for(;o!=i;)o.style.height="auto",o.parentNode&&(o=o.parentNode)}pushDownToOpen(){console.log("pushDown");const e=this.bigObj.root,t=this.bannerObj.root;e.classList.remove("pullup-close"),e.classList.add("pushdown-open"),e.style.height="90px",e.style.display="block",e.style.display="block",this.innerIframe&&this.outerIframe&&(this.innerIframe.style.height="90px",this.outerIframe.style.height="90px",this.innerIframe.classList.remove("pullup-close"),this.innerIframe.classList.add("pushdown-open"),this.outerIframe.classList.remove("pullup-close"),this.outerIframe.classList.add("pushdown-open")),t.style.display="none",setTimeout(()=>{e.classList.remove("pushdown-open"),e.style.height=this.bigHeight,this.innerIframe&&this.outerIframe&&(this.innerIframe.style.height=this.bigHeight,this.outerIframe.style.height=this.bigHeight,this.innerIframe.classList.remove("pushdown-open"),this.outerIframe.classList.remove("pushdown-open"))},1e3)}pullUpToClose(){this.bigObj.root.classList.add("pullup-close"),this.innerIframe&&this.outerIframe&&(this.innerIframe.style.height=this.bigHeight,this.outerIframe.style.height=this.bigHeight,this.innerIframe.classList.remove("pushdown-open"),this.innerIframe.classList.add("pullup-close"),this.outerIframe.classList.remove("pushdown-open"),this.outerIframe.classList.add("pullup-close")),setTimeout(()=>{this.bigObj.root.style.display="none",this.bigObj.root.classList.remove("pullup-close"),this.bannerObj.root.style.display="block",this.innerIframe&&this.outerIframe&&(this.innerIframe.style.height="90px",this.outerIframe.style.height="90px",this.innerIframe.classList.remove("pullup-close"),this.outerIframe.classList.remove("pullup-close"))},1e3)}autoOpen(){let e=i.getItem("pushdownAd");if(console.log("pushdownAd="+e),!e){window.addEventListener("load",this.pushDownToOpen,!1);let e=new Date;e.setTime(e.getTime()+864e5),i.setItem("pushdownAd","hasLoaded",e)}}clickToOpen(){this.bannerObj.open.addEventListener("click",this.pushDownToOpen,!1)}clickToClose(){this.bigObj.close.addEventListener("click",this.pullUpToClose,!1)}}new n(new t("bannerImgSection","prod"),new o("bigPicSection","prod"),"prod")}();
//# sourceMappingURL=main.js.map</script></body></html>